# 1337b04rd: To-Do List

## Настройка проекта
- [x] Создать структуру директорий проекта
- [x] Инициализировать Go модуль (go mod init)
- [x] Добавить необходимые зависимости:
  - [x] PostgreSQL драйвер
  - [x] S3 клиент (из своего предыдущего проекта triple-s)

## Доменный слой (core)
- [x] Определить основные сущности (entity):
  - [x] Post (пост/тред)
  - [x] Comment (комментарий)
  - [x] Session (сессия пользователя)
- [x] Определить интерфейсы-порты (port):
  - [x] PostRepository
  - [x] CommentRepository
  - [x] SessionRepository
  - [x] ImageStorage
  - [x] AvatarService
- [ ] Реализовать сервисы с бизнес-логикой:
  - [ ] PostService (создание/чтение/архивирование постов)
  - [ ] CommentService (добавление/чтение комментариев)
  - [ ] SessionService (управление сессиями)
  - [ ] CleanupService (автоматическое удаление/архивирование постов)

## Адаптеры (инфраструктура)
- [ ] Реализовать PostgreSQL адаптер:
  - [ ] Создать схему базы данных
  - [ ] Реализовать PostgresPostRepository
  - [ ] Реализовать PostgresCommentRepository
  - [ ] Реализовать PostgresSessionRepository
- [ ] Реализовать S3 адаптер для хранения изображений:
  - [ ] Создать два бакета (для постов и комментариев)
  - [ ] Реализовать S3ImageStorage
- [ ] Реализовать Rick and Morty API адаптер:
  - [ ] Реализовать запросы к API для получения аватаров
  - [ ] Реализовать кэширование для уменьшения запросов к API
  - [ ] Реализовать механизм назначения аватаров пользователям
- [ ] Реализовать HTTP адаптер:
  - [ ] Создать маршрутизатор
  - [ ] Реализовать обработчики запросов для всех страниц
  - [ ] Реализовать middleware для обработки сессий (куки)
  - [ ] Настроить обработку статических файлов

## Шаблоны и интерфейс
- [ ] Настроить HTML шаблоны:
  - [ ] catalog.html (основная страница с тредами)
  - [ ] archive.html (страница архива)
  - [ ] post.html (страница треда)
  - [ ] archive-post.html (страница архивного треда)
  - [ ] create-post.html (страница создания треда)
  - [ ] error.html (страница ошибки)

## Функциональность
- [ ] Реализовать создание тредов с изображениями
- [ ] Реализовать добавление комментариев к тредам
- [ ] Реализовать систему ответов на комментарии по ID
- [ ] Реализовать сессии пользователей с помощью куки
- [ ] Реализовать систему аватаров из Rick and Morty API
- [ ] Реализовать автоматическое удаление тредов по правилам:
  - [ ] Треды без комментариев удаляются через 10 минут
  - [ ] Треды с комментариями удаляются через 15 минут после последнего комментария
- [ ] Реализовать архив удаленных тредов

## Логирование и тестирование
- [ ] Настроить логирование с использованием log/slog
- [ ] Написать модульные тесты для основных функций:
  - [ ] Тесты для доменных сервисов
  - [ ] Тесты для адаптеров
  - [ ] Тесты для HTTP обработчиков
- [ ] Обеспечить покрытие тестами не менее 20%

## Финальная настройка и запуск
- [ ] Настроить обработку аргументов командной строки (порт, справка)
- [ ] Настроить graceful shutdown сервера
- [ ] Создать Makefile или скрипты для сборки проекта
- [ ] Протестировать полное приложение в реальном окружении
- [ ] Проверить соответствие кода стандартам gofumpt

## Документация
- [ ] Написать README.md с описанием проекта и инструкциями по запуску
- [ ] Создать документацию по API (опционально)
- [ ] Выбрать и добавить лицензию для проекта (опционально)
